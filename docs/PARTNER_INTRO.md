# Lepus AI — 项目介绍

> **参考图驱动的 AI 视觉创作平台**
> 用户上传照片 + 参考图 → AI 理解差异 → 一键生成变换视频/图片

---

## 一句话定位

**"看到什么想变成什么，传张照片就能做到"** — 面向时尚电商与内容创作者的 AI 视觉生成平台。

---

## 目标用户

| 平台 | 典型用户 | 使用场景 |
|------|---------|---------|
| 抖音/快手 | 穿搭 KOL、特效类博主 | 15-30 秒变装视频、挑战赛内容 |
| 小红书 | 穿搭博主、素人测评 | 图文笔记、穿搭教程、好物分享 |
| B站 | 科技 UP 主、设计师 | 深度测评、AI 技术解析 |
| 电商品牌 | 商品运营、视觉设计师 | 商品主图生成、模特试穿、场景图 |

---

## 产品双入口模型

### 入口 1：趋势模板（60 秒出片）

```
发现热门模板 → 上传自拍 → AI 自动生成视频 → 分享到社交平台
```

适合轻度用户，零门槛、即传即出。

### 入口 2：创意画布（深度创作）

```
上传参考图 + 灵感图 → AI 自动解析差异 → 节点式编排工作流 → 精调每个参数 → 导出成品
```

面向专业创作者，支持多步骤 AI 工作流编排。

---

## 核心 AI 能力矩阵

### 🎬 视频生成

| 能力 | 描述 | 输入 | 输出 |
|------|------|------|------|
| **文生视频** | 文字描述 → 生成视频（走秀、街拍、产品展示） | 文字 Prompt | 5-10 秒视频 |
| **图生视频** | 静态图片 → 动态视频，自然运镜 | 1 张图片 | 5-10 秒视频 |
| **多图转场视频** | 多张关键帧 → 平滑过渡视频（换装、换场景） | 2-8 张图片 | 5-10 秒视频 |
| **动作控制** | 参考视频的动作 + 源图 → 保持身份的运动迁移 | 图片 + 参考视频 | 视频 |
| **视频延长** | 延长已有视频时长，保持画面一致性 | 1 段视频 | 延长视频 |
| **口型同步** | 音频 + 人像 → 唇形同步说话视频（数字人播报） | 图片/视频 + 音频 | 视频 |

### 🖼️ 图像生成与编辑

| 能力 | 描述 | 输入 | 输出 |
|------|------|------|------|
| **图像生成（Doubao）** | 高清 2K 文生图，支持多参考图融合 | 文字 ± 参考图 | 2K 图片 |
| **图像编辑（Kling）** | 换背景、局部重绘、风格迁移 | 图片 ± 蒙版 ± Prompt | 图片 |
| **AI 换脸** | 两张图之间换脸，保留体态与光影 | 2 张图片 | 图片 |

### 👗 时尚穿搭

| 能力 | 描述 | 输入 | 输出 |
|------|------|------|------|
| **虚拟试穿** | 人物照 + 服装图 → 穿在身上，保持体型与姿势 | 人像 + 服装图 | 图片 |
| **AI 穿搭师** | 上传一件单品 → AI 生成完整搭配方案（5 种风格） | 服装图 | 多张搭配图 |
| **穿搭内容生成** | 服装 → 适配平台风格的发布级内容（小红书/抖音/Ins） | 1-3 张图 | 平台风格图 |

### ✨ 图像增强

| 能力 | 描述 | 输入 | 输出 |
|------|------|------|------|
| **皮肤美化** | 自然级磨皮、提亮肤色，保留面部细节 | 人像 | 图片 |
| **AI 打光** | 6 种光源 × 6 个方向，调整画面氛围 | 图片 | 图片 |

> **共 15 项 AI 能力**，覆盖从图片生成到视频输出的完整创作链。

---

## 核心产品模块

### 1. 可视化编辑器（Visual Editor）

**节点式 DAG 工作流画布**，类似 ComfyUI 但面向非技术用户：

- 输入节点：图片/视频上传、文字 Prompt
- AI 能力节点：15 种能力任选
- 连线 = 数据流：素材 → AI 处理 → 结果
- 空节点 = 意图容器：先拉线再选能力
- 支持拖拽、对齐、撤销/重做、版本历史

**用户流程**：拖入素材 → 连线到空节点 → 选择 AI 能力 → 调参 → 生成 → 查看结果

### 2. 数字人形象系统

**目的**：让 AI 生成的所有内容保持同一个人的面貌一致性。

- 上传 1 张照片 → AI 生成 4 张多角度确认图 → "这是你吗？"
- 确认后存储面部特征，所有后续生成自动注入
- 支持多个数字人角色管理
- 可选 AI 虚拟形象（不用真人照片）

### 3. 模板系统

**从视频到模板的完整 pipeline**：

```
上传视频 → 自动分镜分析 → LLM 提取工作流 → 草稿模板
  → 管理员 QA → 试渲染 + 评分 → 发布到模板库
  → 用户选模板 → 传自己的照片 → 一键出片
```

- 自动提取转场类型（旋转遮挡、鞭甩摇移、空间扭曲等 6 种）
- Golden Fingerprint 系统：自动匹配新模板到已验证的成功模式
- 参数继承：模板默认参数 → 用户自定义参数 → 最终合成

### 4. Prompt 智能库

**三层 Prompt 增强架构**：

| 层级 | 功能 | 触发 |
|------|------|------|
| **L1 推荐** | 根据当前能力推荐高质量 Prompt 卡片 | 前端弹窗自动加载 |
| **L2 兜底** | prompt 为空 → 库中 fallback；negative 为空 → 自动补全 | 每次请求 |
| **L3 改写** | LLM 融会贯通改写：保留用户意图 + 补充专业技法 | 可开关 |

- 3D 分类：能力维度 × 平台风格 × 输入类型
- pgvector 向量检索，支持语义搜索
- 3,500+ 条专业 fashion prompt 种子库

### 5. 质量参考图 + 增强 RAG

- 上传参考图 → LLM 自动分析（分类、质量分、风格标签）
- 向量入库，生成时语义检索匹配
- 增强策略库：按内容类别 × 质量目标的 pipeline 配置
- 为未来 Agent 自动编排提供知识基础

---

## 技术架构

```
┌──────────────────────────────────────────────────────┐
│              前端 · Next.js 14 + TypeScript           │
│    可视化画布 (XY Flow) · 状态管理 (Zustand)          │
│    视频合成 (Remotion 4) · 画布操作 (Fabric.js)       │
├──────────────────────────────────────────────────────┤
│              后端 · FastAPI + Python 3.11             │
│    27 个 API 模块 · Pydantic 2 校验 · JWT 认证       │
├──────────────────────────────────────────────────────┤
│              异步任务 · Celery 5.4 + RabbitMQ         │
│    GPU 任务队列 · 进度追踪 · 失败重试 + 积分退还      │
├──────────────┬───────────────────────────────────────┤
│  AI 引擎层   │  数据层                                │
│  Kling AI    │  PostgreSQL (Supabase)                │
│  豆包 4.0    │  pgvector 向量检索                     │
│  Gemini LLM  │  Supabase Auth + Storage              │
│  Whisper STT │  Redis 缓存                            │
├──────────────┴───────────────────────────────────────┤
│              视频处理 · Remotion + FFmpeg              │
│    服务端渲染 · HLS 流播放 (Cloudflare Stream)        │
└──────────────────────────────────────────────────────┘
```

### AI 引擎

| 引擎 | 用途 | 特点 |
|------|------|------|
| **Kling AI (可灵)** | 视频生成、换脸、增强、打光 | 国内领先视频生成，V2.1 Master |
| **豆包 Seedream 4.0** | 高清图像生成、穿搭推荐 | 2K 分辨率、多参考图融合 |
| **Gemini / 豆包 LLM** | 模板分析、Prompt 增强、内容理解 | 多模态理解、中文优化 |
| **Whisper** | 语音转文字 | 音频分镜辅助 |

### 基础设施

| 组件 | 用途 |
|------|------|
| **Supabase** | 数据库 + 认证 + 对象存储 + 向量检索 |
| **RabbitMQ** | AI 任务消息队列 |
| **Redis** | 缓存 + 会话状态 |
| **Cloudflare Stream** | 视频 HLS 流播放 |
| **Remotion** | React 组件式视频合成 |
| **FFmpeg** | 视频格式转换、音频处理 |

---

## 积分与计费

| 能力 | 消耗积分 | 约成本 |
|------|---------|--------|
| 图像生成 | 8-15 | ¥0.08-0.15 |
| 皮肤美化/打光 | 20-50 | ¥0.20-0.50 |
| AI 换脸 | 60-100 | ¥0.60-1.00 |
| 口型同步 | 50-80 | ¥0.50-0.80 |
| 图生视频 | 80-150 | ¥0.80-1.50 |
| 文生视频 | 150-300 | ¥1.50-3.00 |

| 套餐 | 价格 | 积分 |
|------|------|------|
| Free | 免费 | 100/月 |
| Pro | ¥139/月 | 700/月 |
| Enterprise | ¥349/月 | 3000/月 |

---

## 竞争优势

| 优势 | 说明 |
|------|------|
| **参考图驱动** | 不是 text-only 的 Midjourney，而是"传照片就能做"的直觉模式 |
| **时尚垂直** | 专注穿搭电商场景，能力矩阵围绕换装/试穿/搭配/内容生成 |
| **数字人一致性** | 一次确认，所有生成保持同一面貌，解决 AI 生成的人脸漂移问题 |
| **节点式工作流** | 灵活组合多步 AI 能力，不是单一功能的工具 |
| **Prompt 智能库** | 3 层增强 + 向量检索，用户不需要懂 Prompt 工程 |
| **模板市场** | 从视频自动提取工作流 → 一键复用，降低创作门槛 |

---

## 发展路径

| 阶段 | 重点 | 状态 |
|------|------|------|
| **Phase 1: MVP** | 15 项 AI 能力 + 画布编辑器 + 数字人 + 模板系统 | ✅ 已完成 |
| **Phase 2: 增长** | LoRA 个人风格引擎 + 社区模板中心 + 质量筛选 | 🔜 进行中 |
| **Phase 3: 壁垒** | 2D→3D 数字样衣 + 自部署推理（降本 70%）+ 品牌 SKU 合作 | 📋 规划中 |

---

*Lepus AI — 让每个人都能用 AI 创作专业级时尚内容。*
