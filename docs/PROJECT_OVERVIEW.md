# Lepus AI — 项目概述

> **一句话定义**：基于参考图驱动的 AI 视觉创作平台，让普通用户通过"图层拆解 + AI 生成"实现从虚拟试衣到场景重塑的自由创作。

---

## 1. 产品定位

Lepus AI 定位于**时尚内容创作领域的视觉操作系统**。

不同于传统 AI 生图工具的"文生图"范式，Lepus 以**参考图为核心驱动**：用户上传一张照片和一张灵感图，AI 自动理解两者差异，生成变换视频或图片。核心理念是——**看到什么，就能变成什么**。

与 HeyGen/Synthesia 等"对口播报"产品不同，Lepus 聚焦**叙事型视觉内容**——用户的数字形象可以出现在任何场景、穿任何衣服、做任何动作，而不仅仅是说话的头像。

---

## 2. 核心能力矩阵

### 已上线能力 ✅

| 类别 | 能力 | 说明 |
|------|------|------|
| **视觉解构** | 智能分层 | 上传人像 → 自动拆解为人物/服装/背景等独立图层 |
| | 智能补全 (Inpainting) | 拆解后自动修复各图层空洞区域 |
| **图像生成** | 多模型生图 | 支持 Doubao Seedream 4.0 / Kling Image O1，统一入口自由切换 |
| | AI 换脸 | 保留身体姿态，替换面部 |
| | 虚拟试穿 (Outfit Swap) | 人物图 + 服装图 → AI 换装，保持体型和姿态 |
| | AI 穿搭师 | 上传衣物 → AI 推荐完整搭配方案 |
| | AI 穿搭内容 | 衣物 → 自动生成小红书/抖音风格的可发布穿搭图 |
| **图像增强** | 皮肤美化 | 一键美颜，保持五官特征 |
| | AI 打光 | 6 种光照类型 × 6 种方向，重塑照片氛围 |
| **视频生成** | 文生视频 / 图生视频 | Prompt 或图片驱动的视频创作 |
| | 多图转场视频 | 多张关键帧 → 自动生成平滑转场动画 |
| | 口型同步 | 视频/图片 + 音频 → 自动对嘴 |
| | 动作控制 | 参考视频运动轨迹 → 驱动源图生成动态 |
| | 视频延长 | 延长已有视频时长 |
| **数字人系统** | 数字形象创建 | 上传照片 → AI 生成多角度确认肖像 → 绑定为数字人 |
| | 人脸一致性 | 数字人面部自动注入所有生成任务，保证"像你" |

### 规划中能力 🔜

| 能力 | 说明 | 阶段 |
|------|------|------|
| LoRA 个性化引擎 | 特定单品/风格的精准生成与替换 | Phase 2 |
| 风格迁移 (Re-styling) | 保持版型，改变面料与风格 | Phase 2 |
| 2D → 3D 数字样衣 | 服装平铺图 → 可旋转的 3D 模型 | Phase 3 |
| 3D 营销短片 | 3D 样衣自动生成 360° 展示视频 | Phase 3 |
| 质量拦截网 | 美学评分 + 人体关键点检测，低质量自动重绘 | Phase 2 |

---

## 3. 产品架构

### 3.1 双入口设计

```
┌─────────────────────────────────────────┐
│           Lepus AI 产品入口              │
├──────────────────┬──────────────────────┤
│  🔥 趋势模板      │  🎨 创作画布          │
│  (60秒快速路径)   │  (深度创作路径)       │
│                  │                      │
│  发现爆款模板     │  上传照片 + 灵感图    │
│  → 上传自拍      │  → AI 自动解析差异    │
│  → 一键生成      │  → 构建 AI 节点链     │
│  → 即时分享      │  → 自定义调参/导出    │
└──────────────────┴──────────────────────┘
```

- **趋势模板**：降低门槛，60 秒出片，社交裂变的抓手
- **创作画布**：释放创意，节点式工作流支撑复杂多步骤创作

### 3.2 视觉编辑器（创作画布）

核心交互是**画布节点工作流**：

```
[原图节点] ──→ [AI 分层] ──→ [服装层] ──→ [AI 换装] ──→ [结果]
                          ├─→ [背景层] ──→ [场景重塑] ──→ [结果]
                          └─→ [人物层] ──→ [AI 打光]  ──→ [结果]
```

- **自由画布**：拖拽、对齐、网格布局
- **连线 = 关联**：两个节点连线即表示"用这两个素材做生成"
- **Prompt 节点**：画布上独立的提示词节点，连线到生成节点即可驱动
- **多模型选择**：所有生图能力均支持在 Doubao / Kling 间切换
- **版本历史**：每次生成保留历史，可回溯对比

### 3.3 技术架构

```
┌─────────────────────────────────────────────────┐
│                  用户端 (Next.js 14)             │
│  App Router + TypeScript + Zustand + Tailwind   │
│  Visual Editor (XY Flow) + Fabric.js + Remotion │
└──────────────────┬──────────────────────────────┘
                   │ REST API
┌──────────────────▼──────────────────────────────┐
│              业务服务 (FastAPI 0.115)             │
│  27 个 API 模块 · Pydantic 2 · Auth (Supabase)  │
├─────────────────────────────────────────────────┤
│              异步任务层 (Celery 5.4)             │
│  RabbitMQ 队列 · Redis 缓存 · 任务进度推送      │
├──────────────┬──────────────┬───────────────────┤
│  AI 引擎层    │  数据层       │  视频处理层       │
│              │              │                   │
│ • Kling AI   │ • Supabase   │ • Remotion 4      │
│ • Doubao     │   (PG+Auth   │ • FFmpeg          │
│   Seedream   │    +Storage) │ • Cloudflare      │
│ • Gemini LLM │              │   Stream (HLS)    │
│ • Whisper    │              │                   │
└──────────────┴──────────────┴───────────────────┘
```

**关键技术决策：**

| 决策 | 当前方案 | 演进方向 |
|------|---------|---------|
| AI 推理 | API 集成（Kling / Doubao） | 高频调用迁移至自建推理服务 |
| 模型扩展 | 统一路由 + Provider 分发 | 接入 Replicate/Fal 生态，动态加载 LoRA |
| 视频渲染 | Remotion 服务端渲染 | 自建 GPU 渲染集群 |
| 存储 | Supabase Storage + Cloudflare | 国内 CDN + 对象存储 |

---

## 4. 差异化优势

### vs 传统修图工具（Photoshop / 美图）
- **AI 原生**：不是在传统工具上叠 AI 滤镜，而是从零构建 AI 驱动的工作流
- **图层智能化**：不是手动抠图，而是 AI 自动分解 + 补全 + 重构

### vs 泛 AI 生图工具（Midjourney / DALL·E）
- **垂直场景**：专注时尚内容，理解服装、穿搭、风格的领域语义
- **人脸一致性**：数字人系统保证"像你"，不是每次生成一个新人

### vs AI 视频工具（HeyGen / Synthesia）
- **叙事型创作**：用户是导演而非播报员，可以创建任意场景的视觉叙事
- **参考图驱动**：看到什么就能变成什么，而非模板填空

### 核心壁垒（远期）
1. **LoRA 资产库**：品类 LoRA（西装/礼服）+ 风格 LoRA（胶片/Y2K）+ 面料 LoRA（粗花呢/蕾丝）
2. **3D 能力融合**：2D → 3D 数字样衣，360° 营销短片
3. **数据飞轮**：用户行为 → 训练更好的模型 → 更好的生成效果 → 更多用户

---

## 5. 落地路线图

| 阶段 | 周期 | 核心目标 | 关键交付 |
|------|------|---------|---------|
| **Phase 1: MVP** | 1-2 月 | 跑通核心创作流 | ✅ 图层分解 + 补全<br>✅ 多模型生图（Doubao + Kling）<br>✅ 换装/打光/美颜五大增强能力<br>✅ 数字人系统（人脸一致性）<br>✅ 画布节点工作流 |
| **Phase 2: 增长** | 3-5 月 | 引入 LoRA 与社交 | 🔜 LoRA 个性化引擎（"我的数字衣橱"）<br>🔜 社区模板中心（一键同款）<br>🔜 风格迁移（Re-styling）<br>🔜 质量拦截网（自动重绘） |
| **Phase 3: 壁垒** | 6-12 月 | 3D 与深层闭环 | 🔜 2D → 3D 数字样衣<br>🔜 自建推理服务（降本 70%+）<br>🔜 品牌方 SKU 数据合作 |

---

## 6. 增长策略

**核心钩子**："不要扔掉你的旧照片，用 AI 把它变成时尚大片。"

**病毒式传播路径**：
```
普通自拍 → 图层分离（视觉冲击）→ 背景变巴黎铁塔 + 衣服变高定礼服 → 生成走秀视频 → 一键分享
```

**双循环增长**：
- **消费循环**：发现模板 → 60 秒出片 → 分享 → 新用户发现
- **创作循环**：创作者用画布制作模板 → 发布到社区 → 被消费者使用 → 创作者获得收益

---

## 7. 项目现状

**已完成**：
- 全栈架构搭建（Next.js + FastAPI + Celery + Supabase）
- 13 项 AI 能力集成并上线视觉编辑器
- 多模型支持架构（统一路由 + Provider 分发）
- 数字人系统（创建/确认/面部注入）
- 画布节点工作流（连线/Prompt 节点/生成/历史）
- 模板系统（导入/分析/应用/发布）

**进行中**：
- 图层分解增强（按语义类别智能拆分）
- 多模型扩展（更多 Provider 接入）
- 交互体验打磨（动效/状态/响应式）

---

*Last updated: 2026-02-14*
